<div class="page-container">
  <div class="chat-wrapper">
    <div class="chat-inner">

      <!-- Sticky Header -->
      <div class="chat-header">
        <h1 class="chat-title">Chats</h1>
        <button (click)="openNewChatPopup()" class="start-chat-btn">Start New Chat</button>
      </div>

      <!-- Scrollable Chat List -->
      <div class="chat-list-container">
        <ul class="chat-list">
          @for (chat of chatStore.chats(); track chat.id) {
          <li>
            <a [routerLink]="['/home/chat']" [queryParams]="{id: chat.id}" class="chat-item-link">
              <div class="chat-item">
                <div class="chat-item-header">
                  <p class="chat-name">{{ getChatName(chat) }}</p>
                  <div class="chat-time">
                    <p class="timestamp">{{ chat.lastMessageTimestamp.toDate() | date : 'short' }}</p>
                  </div>
                </div>
                <div class="chat-item-body">
                  <p class="chat-message-preview">{{ chat.lastMessage }}</p>
                </div>
              </div>
            </a>
          </li>
          }
        </ul>

        @if (chatStore.chats().length === 0) {
        <p class="no-chats-message">No chats available. Start a new chat!</p>
        }
      </div>

      <!-- Sticky Logout Button -->
      <div class="logout-container">
        <button (click)="logout()" class="logout-btn">Logout</button>
      </div>

    </div>
  </div>
</div>
