<div class="modal-overlay" (click)="onBackdropClick($event)">
  <div class="new-chat-container" (click)="$event.stopPropagation()">
    <div class="new-chat-header">
      <h2>Start a New Chat</h2>
    </div>

    <div class="new-chat-form-container">
      <div class="new-chat-form-box">

        <!-- Show error if exists -->
        <div *ngIf="errorMessage()" class="error-message" role="alert">
          <span>{{ errorMessage() }}</span>
        </div>

        <!-- Search Bar -->
        <div class="search-bar">    
          <input
            type="text"
            placeholder="Enter User's Name"
            [(ngModel)]="searchQuery"
            (keyup.enter)="searchUsers()"
          />
          <button (click)="searchUsers()" class="search-icon">
            <i class="fas fa-search"></i>
          </button>
        </div>

        <!-- List of users -->
        <div class="user-list" *ngIf="filteredUsers.length > 0">
          <div
            class="user-item"
            *ngFor="let user of filteredUsers"
            (click)="startChat(user)"
          >
            {{ user.name }}
          </div>
        </div>

        <!-- No results -->
        <div class="no-results" *ngIf="searchPerformed && filteredUsers.length === 0">
          No users found.
        </div>

      </div>
    </div>
  </div>
</div>
